# Real Estate App

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Telegram MiniApp –∏ –≤–µ–±-–≤–µ—Ä—Å–∏–∏. –í–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Matterport –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö 3D —Ç—É—Ä–æ–≤.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **Telegram MiniApp** - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ Telegram —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º UI
- ‚úÖ **–í–µ–±-–≤–µ—Ä—Å–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Å–∞–π—Ç
- ‚úÖ **Matterport –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ 3D –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä—ã
- ‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI** - Tailwind CSS, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫** - –ø–æ –≥–æ—Ä–æ–¥—É, —Ç–∏–ø—É, —Å—Ç–∞—Ç—É—Å—É, —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ backend/          # NestJS API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ objects/     # –ú–æ–¥—É–ª—å –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ partners/    # –ú–æ–¥—É–ª—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/      # –ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ entities/    # TypeORM —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ migrations/      # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ frontend/         # Next.js 14 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/         # App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/       # Custom hooks (Telegram)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/         # –£—Ç–∏–ª–∏—Ç—ã –∏ API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/       # Zustand state management
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/       # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ public/          # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ infrastructure/   # PostgreSQL init —Å–∫—Ä–∏–ø—Ç—ã
    ‚îî‚îÄ‚îÄ postgres/
        ‚îî‚îÄ‚îÄ init.sql   # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend
- **Next.js 14** - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å App Router
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Zustand** - state management
- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç
- **Lucide React** - –∏–∫–æ–Ω–∫–∏

### Backend
- **NestJS** - Node.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeORM** - ORM –¥–ª—è PostgreSQL
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **class-validator** - –≤–∞–ª–∏–¥–∞—Ü–∏—è DTOs

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 18
- PostgreSQL >= 12 (–ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 5432)
- npm –∏–ª–∏ yarn

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm run install:all

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
make install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   ```sql
   CREATE DATABASE real_estate;
   ```
3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É –∏–∑ `infrastructure/postgres/init.sql`:
   ```bash
   psql -U postgres -d real_estate -f infrastructure/postgres/init.sql
   ```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Database
DB_HOST=localhost
DB_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=real_estate

# Backend
NODE_ENV=development
PORT=3001
CORS_ORIGIN=http://localhost:3000

# Frontend
NEXT_PUBLIC_API_URL=http://localhost:3001/api
```

## üöÄ –ó–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –∏ frontend –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
npm run dev

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
make dev

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
npm run dev:backend   # Backend –Ω–∞ http://localhost:3001
npm run dev:frontend   # Frontend –Ω–∞ http://localhost:3000
```

**–í–∞–∂–Ω–æ:** Frontend –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ backend –Ω–µ –∑–∞–ø—É—â–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ `infrastructure/postgres/init.sql`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Å–µ—Ä–≤–µ—Ä

### Production

```bash
# Build
cd backend && npm run build
cd frontend && npm run build

# Start
cd backend && npm start
cd frontend && npm start
```

## üåê –î–æ—Å—Ç—É–ø

- **Frontend**: `http://localhost:3000`
- **Backend API**: `http://localhost:3001/api`

## üì° API Endpoints

### Objects (–û–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏)

- `GET /api/objects` - –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- `GET /api/objects/:id` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—ä–µ–∫—Ç–µ
- `POST /api/objects` - –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `PATCH /api/objects/:id` - –û–±–Ω–æ–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `DELETE /api/objects/:id` - –£–¥–∞–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è GET /api/objects:**
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
- `city` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É
- `type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (apartment, studio, villa, developer_tour)
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É (for_sale, for_rent, under_construction, planned)
- `search` - —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é

### Partners (–ü–∞—Ä—Ç–Ω–µ—Ä—ã)

- `GET /api/partners` - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- `GET /api/partners/:id` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ
- `GET /api/partners/slug/:slug` - –ü–∞—Ä—Ç–Ω–µ—Ä –ø–æ slug

### Events (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞)

- `POST /api/events` - –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
- `GET /api/events` - –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)

## üé® –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

- **objects** - –æ–±—ä–µ–∫—Ç—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
- **partners** - –ø–∞—Ä—Ç–Ω–µ—Ä—ã/—Ä–∏–µ–ª—Ç–æ—Ä—ã
- **developers** - –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∏
- **admin_users** - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- **miniapp_users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ MiniApp (–∞–Ω–æ–Ω–∏–º–Ω—ã–µ)
- **events** - —Å–æ–±—ã—Ç–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **links** - deeplinks –∏ –∫–∞–º–ø–∞–Ω–∏–∏
- **audit_log** - –∂—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ–¥—Ä–æ–±–Ω–∞—è ERD —Å—Ö–µ–º–∞: https://qj7.github.io/real-estate-db-erd/view_diagrams.html

## üì± Telegram MiniApp

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –æ–Ω–æ –≤ Telegram, –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç UI:

- –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã Telegram
- –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Telegram WebApp SDK –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üè† Matterport –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `MatterportViewer` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å—Å—ã–ª–æ–∫:

- `https://my.matterport.com/show/?m=SPACE_ID`
- `https://my.matterport.com/models/SPACE_ID`
- –ü—Ä—è–º–æ–π `SPACE_ID`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ class-validator
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ RBAC —Å–∏—Å—Ç–µ–º–µ (SuperAdmin, Partner, Support)

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

–ß–µ—Ä–µ–∑ API:
```bash
curl -X POST http://localhost:3001/api/objects \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ö–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ",
    "type": "apartment",
    "status": "for_sale",
    "city": "Dubai",
    "rooms": 2,
    "area": 85.5,
    "price_min": 500000,
    "matterport_link": "https://my.matterport.com/show/?m=YOUR_SPACE_ID"
  }'
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- `components/layout/Header` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `components/objects/ObjectCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±—ä–µ–∫—Ç–∞
- `components/objects/MatterportViewer` - 3D —Ç—É—Ä
- `hooks/useTelegram` - —Ä–∞–±–æ—Ç–∞ —Å Telegram WebApp

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- –î–ª—è —Ä–∞–±–æ—Ç—ã Matterport —Ç—É—Ä–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å Space ID
- –ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏)
- Backend —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è —Ä–∞–±–æ—Ç—ã API endpoints

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç (Next.js 14, Tailwind CSS, Telegram SDK)
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Telegram MiniApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞
- ‚ö†Ô∏è Backend —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞–±–æ—Ç—ã API

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Private project
